
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Planner PCSC com Firebase</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script>
    
const firebaseConfig = {
  apiKey: "AIzaSyAXq_M0igRtgGTKux-jcx_wNysPkJnrydw",
  authDomain: "policia-civil-sc.firebaseapp.com",
  projectId: "policia-civil-sc",
  storageBucket: "policia-civil-sc.firebasestorage.app",
  messagingSenderId: "834706585932",
  appId: "1:834706585932:web:b2fab9bbce3df4c25877e9",
  measurementId: "G-9L1001DSMM"
};

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();
  </script>
  <style>
    @media (max-width: 768px) { html { font-size: 90%; } }
    @media (max-width: 480px) { html { font-size: 80%; } }
  </style>
</head>
<body class="bg-gray-100 text-gray-900 min-h-screen p-4 flex flex-col items-center">
  <div class="w-full max-w-4xl space-y-6">
    <h1 class="text-3xl font-bold text-center text-blue-700">Planner PCSC üîê</h1>
    <div class="text-center flex flex-col items-center justify-center space-y-2" id="userInfo"></div>
    <div class="text-center">
      <button id="loginBtn" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Entrar com Google</button>
      <button id="logoutBtn" class="hidden bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Sair</button>
    </div>

    <div id="dashboard" class="hidden">
      <div class="w-full bg-gray-300 rounded-full h-4">
        <div id="barraProgresso" class="bg-blue-600 h-4 rounded-full transition-all" style="width: 0%"></div>
      </div>
      <p id="textoProgresso" class="text-center text-sm">0% conclu√≠do</p>
      <p id="tempoTotal" class="text-center text-sm text-gray-600">Tempo total estudado: 0h 0m 0s</p>
      <div id="conteudo"></div>
    </div>

    <div id="cronometroModal" class="fixed inset-0 bg-black bg-opacity-80 hidden flex items-center justify-center z-50">
      <div class="flex flex-col items-center">
        <div id="cronometro" class="text-5xl font-bold text-green-400 animate-pulse">00:00:00</div>
        <button onclick="finalizarEstudo()" class="mt-6 bg-green-600 text-white px-6 py-3 rounded text-lg hover:bg-green-700">
          ‚úÖ Finalizar Estudo
        </button>
      </div>
    </div>
  </div>

  <script>
    let user = null;
    let estado = {}, tempoTotal = 0;
    let estudoAtual = null, tempo = 0, intervalo = null;
const estrutura = {
  "Constitucional": [
    "Conceito de Direito Constitucional: Natureza e Objeto",
    "Art. 1¬∫ ao 4¬∫ - Princ√≠pios fundamentais",
    "Art. 5¬∫ - Direitos e deveres individuais e coletivos",
    "Art. 6¬∫ ao 11 - Direitos Sociais",
    "Art. 12 e 13 - Direitos de nacionalidade",
    "Art. 14 ao 17 - Direitos pol√≠ticos e partidos pol√≠ticos",
    "Art. 37 e 38 - Administra√ß√£o P√∫blica (Disposi√ß√µes Gerais)",
    "Art. 39 ao 42 - Dos Servidores P√∫blicos",
    "Art. 144 - Seguran√ßa P√∫blica",
    "Princ√≠pios do Direito Constitucional e Princ√≠pios Constitucional do Estado Brasileiro"
  ],
  "Administrativo": [
    "Conceitos, Fontes e Princ√≠pios do Direito Administrativo",
    "Administra√ß√£o Direta (√ìrg√£o P√∫blico e Agentes P√∫blicos)",
    "Administra√ß√£o Direta e Indireta (autarquias, ag√™ncias reguladoras, ag√™ncias executivas, funda√ß√µes p√∫blicas, ag√™ncias p√∫blicas, empresas p√∫blicas, sociedades de economia mista e cons√≥rcios p√∫blicos).",
    "Entidades Paraestatais e Terceiro Setor (Servi√ßos aut√¥nomos, Entidades de apoio, Organiza√ß√µes da sociedade civil de interesse p√∫blico)",
    "Atos Administrativos (Conceito, Classifica√ß√£o e Invalida√ß√£o)",
    "Poderes Administrativos (Hier√°rquico, Disciplinar, Regulamentar e de Pol√≠cia - Uso e Abuso do Poder)",
    "Lei de Licita√ß√µes (Lei n¬∫ 14.133/2021)",
    "Contrato Administrativo: princ√≠pios gerais, esp√©cies e rescis√£o",
    "Servi√ßos P√∫blicos (princ√≠pios gerais)",
    "Improbidade Administrativa (Lei n¬∫ 8.429/1992)",
    "Responsabilidade Civil do Estado"
  ],
  "Legisla√ß√£o Institucional": [
    "Art. 1¬∫ ao 31-D - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 32 ao 80 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 81 ao 101 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 102 ao 137 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 138 ao 173 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 174 ao 203 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 204 ao 226 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 244 ao 275 - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Anexos I, II, III, IV, V e VI - Lei n¬∫ 6.843/1986 (Estatuto da PCSC)",
    "Art. 144 - Seguran√ßa P√∫blica (Constitui√ß√£o Federal)",
    "Art. 105 ao 109-A - Da Seguran√ßa P√∫blica (Constitui√ß√£o Estadual)",
    "Lei Complementar n¬∫ 611/2013 (Subs√≠dio Agente da Autoridade Policial)",
    "Lei n¬∫ 16.774/2015 (Jornada de Trabalho e Banco de Horas PCSC)",
    "Lei Complementar n¬∫  491/2010 (Estatuto Jur√≠dico Disciplinar)",
    "Lei Complementar n. 453/2009 (Plano de Carreira)",
    "Lei n¬∫ 14.735/2023 (Lei Org√¢nica Nacional das Pol√≠cias Civis)"
  ],
  "Portugu√™s": [
    "Leitura, interpreta√ß√£o e an√°lise de textos de diferentes g√™neros textuais, verbais e n√£o verbais",
    "Efeitos de sentido produzidos nos textos. Coes√£o e coer√™ncia textual",
    "Acentua√ß√£o gr√°fica",
    "Grafia dos voc√°bulos",
    "Hifeniza√ß√£o",
    "Pontua√ß√£o",
    "Uso dos ‚Äúporqu√™s\"",
    "Emprego das classes de palavras (Morfologia)",
    "Concord√¢ncia nominal",
    "Concord√¢ncia verbal",
    "Reg√™ncia nominal",
    "Reg√™ncia verbal",
    "Fex√£o verbal",
    "Flex√£o Nominal"
  ],
  "Inform√°tica": [
    "Windows: fundamentos do Windows. Trabalho com pastas e arquivos - Configura√ß√µes B√°sicas do Windows - Windows Explorer",
    "Word: √°rea de trabalho, barras de ferramentas, bot√µes e menus do Word. Formata√ß√£o de documentos no Word",
    "Excel: √°rea de trabalho, barras de ferramentas, bot√µes e menus do Excel.Principais fun√ß√µes do Excel. Formata√ß√£o. Classifica√ß√£o de dados. Gr√°ficos.",
    "Power Point",
    "Redes de Computadores",
    "Protocolos e Servi√ßos de Internet",
    "Correio Eletr√¥nico",
    "World Wide Web",
    "Conceitos de Seguran√ßa na Internet",
    "Procedimentos de Backup",
    "Armazenamento de Dados na Nuvem",
    "Celulares, Tablets e suas Tecnologias",
    "Biometria",
    "Moedas Virtuais"
  ],
  "Penal Comum": [
    "Disposi√ß√µes constitucionais aplic√°veis ao direito penal",
    "Sujeito ativo e passivo da infra√ß√£o penal",
    "Teoria do Crime (Tipicidade, ilicitude, culpabilidade, punibilidade)",
    "Art. 1¬∫ ao 12 - Aplica√ß√£o da Lei Penal",
    "Art. 13 ao 25 -  Do Crime",
    "Art. 26 ao 31 - Imputabilidade penal - Concurso de pessoas",
    "Art. 121 ao 128 - Crimes contra a Vida",
    "Art. 129 - Les√µes Corporais",
    "Art. 130 a 137 - Periclita√ß√£o da Vida e da Sa√∫de",
    "Art. 138 a 145 - Crimes contra a Honra",
    "Art. 146 a 154 - Crimes contra a Liberdade",
    "Art. 155 ao 183 - Crimes contra o Patrim√¥nio",
    "Art. 213 ao 234-B - Crimes contra a Dignidade Sexual",
    "Art. 289 ao 311 - Crimes contra a F√© p√∫blica",
    "Art. 312 ao 327 - Crimes contra a administra√ß√£o p√∫blica (praticado por FUNCION√ÅRIO P√öBLICO)",
    "Art. 328 ao 337-D - Crimes contra a administra√ß√£o p√∫blica (praticador por PARTICULAR)",
    "Art. 337-E ao 337-P - Dos Crimes em Licita√ß√µes e Contratos Administrativos",
    "Art. 338 ao 359 - Dos Crimes contra a Administra√ß√£o da Justi√ßa",
    "Art. 359-A ao 359-H - Dos Crimes contra as Finan√ßas P√∫blicas"
  ],
  "Processo Penal Comum": [
    "Princ√≠pios constitucionais e infraconstitucionais do Direito Processual Penal",
    "Art. 1¬∫ ao 3¬∫ - Aplica√ß√£o da lei processual penal - Disposi√ß√µes preliminares do C√≥digo de Processo Penal",
    "Art. 4¬∫ ao 23 - Inqu√©rito Policial",
    "Art. 24 ao 62 - A√ß√£o Penal",
    "Art. 69 ao 91 - Compet√™ncia + Jurisdi√ß√£o",
    "Art. 155 ao 184 - Da Prova: Disposi√ß√µes Gerais, Corpo de Delito, Cust√≥dia e Per√≠cias",
    "Art. 185 ao 196 - Da Prova: Interrogat√≥rio do Acusado",
    "Art. 197 ao 201 - Da Prova: Confiss√£o e Ofendido",
    "Art. 202 ao 225 - Da Prova: Testemunhas",
    "Art. 226 ao 250 - Da Prova: Reconhecimento, Acarea√ß√£o, Documentos, Ind√≠cios e Busca e Apreens√£o",
    "Art. 301 a 310 - Pris√£o em Flagrante",
    "Art. 311 ao 320 - Pris√£o Preventiva,Pris√£o Domiciliar e Outras Medidas Cautelares",
    "Lei n¬∫ 7.960/1989 (pris√£o tempor√°ria)",
    "Lei n¬∫ 12.830/13 - Investiga√ß√£o Criminal Conduzida pelo Delegado de Pol√≠cia)"
  ],
  "Racioc√≠nio L√≥gico": [
    "Compreens√£o de estruturas l√≥gicas",
    "L√≥gica de argumenta√ß√£o: analogias, infer√™ncias, dedu√ß√µes e conclus√µes",
    "Opera√ß√µes com conjuntos",
    "Progress√µes aritm√©ticas e geom√©tricas",
    "Fun√ß√µes",
    "Raz√µes e propor√ß√µes",
    "Porcentagem e regra de tr√™s",
    "Princ√≠pios de contagem e probabilidade",
    "Arranjos e permuta√ß√µes",
    "Combina√ß√µes"
  ],
  "Direitos Humanos": [
    "O conceito de direitos humanos - No√ß√µes gerais sobre Direitos Humanos",
    "Os direitos humanos na Organiza√ß√£o das Na√ß√µes Unidas",
    "Os direitos humanos na Organiza√ß√£o dos Estados Americanos",
    "A Declara√ß√£o Universal dos Direitos Humanos",
    "A Corte Interamericana de Direitos Humanos",
    "A natureza jur√≠dica da incorpora√ß√£o de normas internacionais sobre direitos humanos ao direito interno brasileiro"
  ],
  "Arquivologia": [
    "No√ß√µes b√°sicas de teoria arquivistica",
    "Terminologia arquivistica",
    "O Arquivo intermedi√°rio",
    "O Plano de Classifica√ß√£o",
    "A Tabela de Temporalidade e Destina√ß√£o de Documentos",
    "O Sistema Informatizado de Gest√£o Arquivistica de Documentos - SIGAD",
    "O arquivo permanente",
    "Arranjo de documentos",
    "A descri√ß√£o arquivistica",
    "No√ß√µes de conserva√ß√£o preventiva",
    "Processos reprogr√°ficos, microfilmagem, digitaliza√ß√£o"
  ]
}


    function formatarTempo(s) {
      const h = Math.floor(s / 3600);
      const m = Math.floor((s % 3600) / 60);
      const sec = s % 60;
      return `${h}h ${m}m ${sec}s`;
    }

    function atualizarProgresso() {
      const total = Object.values(estrutura).flat().length;
      const feitos = Object.values(estado).filter(Boolean).length;
      const perc = Math.round((feitos / total) * 100);
      document.getElementById('barraProgresso').style.width = `${perc}%`;
      document.getElementById('textoProgresso').innerText = `${perc}% conclu√≠do`;
      document.getElementById('tempoTotal').innerText = `Tempo total estudado: ${formatarTempo(tempoTotal)}`;
    }

    function renderizar() {
      const container = document.getElementById('conteudo');
      container.innerHTML = '';
      for (const [disciplina, topicos] of Object.entries(estrutura)) {
        const box = document.createElement('div');
        box.className = "bg-white shadow p-4 rounded mb-4";
        box.innerHTML = `<h2 class='text-xl font-semibold text-blue-600 mb-2'>${disciplina}</h2>`;

        topicos.forEach((item) => {
          const key = `${disciplina}::${item}`;
          const linha = document.createElement('div');
          linha.className = "flex justify-between items-center py-1 border-b gap-2 flex-wrap";

          linha.innerHTML = `
            <label class='flex items-center gap-2'>
              <input type='checkbox' ${estado[key] ? 'checked' : ''} onchange='toggleCheckbox("${key}", this.checked)' />
              ${item}
            </label>
            ${!estado[key] ? `<button onclick='iniciarEstudo("${disciplina}", "${item}")' class='text-sm text-green-600 hover:underline'>‚ñ∂ Iniciar Estudo</button>` : ''}
          `;

          box.appendChild(linha);
        });
        container.appendChild(box);
      }
      atualizarProgresso();
    }

    function toggleCheckbox(key, checked) {
      estado[key] = checked;
      salvarNoFirestore();
      renderizar();
    }

    function iniciarEstudo(disciplina, item) {
      estudoAtual = `${disciplina}::${item}`;
      tempo = 0;
      document.getElementById('cronometroModal').classList.remove('hidden');
      intervalo = setInterval(() => {
        tempo++;
        document.getElementById('cronometro').innerText = new Date(tempo * 1000).toISOString().substr(11, 8);
      }, 1000);
    }

    function finalizarEstudo() {
      clearInterval(intervalo);
      if (estudoAtual) {
        estado[estudoAtual] = true;
        tempoTotal += tempo;
        salvarNoFirestore();
      }
      estudoAtual = null;
      document.getElementById('cronometroModal').classList.add('hidden');
      renderizar();
    }

    function salvarNoFirestore() {
      if (!user) return;
      db.collection("usuarios").doc(user.uid).set({
        progresso: estado,
        tempoTotal: tempoTotal
      });
    }

    function carregarDoFirestore() {
      db.collection("usuarios").doc(user.uid).get().then(doc => {
      if (doc.exists) {
        const data = doc.data();
        estado = data.progresso || {};
        tempoTotal = data.tempoTotal || 0;
      } else {
        estado = {};
        tempoTotal = 0;
      }
      renderizar();
      document.getElementById('dashboard').classList.remove('hidden');
      });
    }

    // Autentica√ß√£o
    document.getElementById('loginBtn').onclick = () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider);
    };

    document.getElementById('logoutBtn').onclick = () => auth.signOut();

    auth.onAuthStateChanged(u => {
      if (u) {
        user = u;
        document.getElementById('userInfo').innerHTML = `<p class='text-lg'>Bem-vindo, <strong>${u.displayName}</strong></p>`;
        document.getElementById('loginBtn').classList.add('hidden');
        document.getElementById('logoutBtn').classList.remove('hidden');
        carregarDoFirestore();
        document.getElementById("dashboard").classList.remove("hidden");
        document.getElementById('dashboard').classList.remove('hidden');
      
      } else {
        user = null;
        estado = {};
        tempoTotal = 0;
        document.getElementById('userInfo').innerText = '';
        document.getElementById('loginBtn').classList.remove('hidden');
        document.getElementById('logoutBtn').classList.add('hidden');
        document.getElementById('dashboard').classList.add('hidden');
      }
    });
  </script>
</body>
</html>
